(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"99Un":function(e,t,i){"use strict";i.r(t),i.d(t,"HomeModule",(function(){return U}));var s=i("ofXK"),a=i("fXoL");const r=["video"],n=["canvas"];function c(e,t){if(1&e){const e=a.Mb();a.Lb(0,"div",6),a.Sb("click",(function(){return a.ac(e),a.Ub().rotateVideoInput(!0)})),a.Kb()}}class o{constructor(e,t,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=t,this._imageAsDataUrl=e,this._imageData=i}static getDataFromDataUrl(e,t){return e.replace(`data:${t};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=o.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class h{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,t)=>{navigator.mediaDevices.enumerateDevices().then(t=>{e(t.filter(e=>"videoinput"===e.kind))}).catch(e=>{t(e.message||e)})}):Promise.reject("enumerateDevices() not supported.")}}var g;let d=(()=>{let e=g=class{constructor(){this.width=640,this.height=480,this.videoOptions=g.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=g.DEFAULT_IMAGE_TYPE,this.imageQuality=g.DEFAULT_IMAGE_QUALITY,this.imageCapture=new a.n,this.initError=new a.n,this.imageClick=new a.n,this.cameraSwitched=new a.n,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(e=>{"string"==typeof e?this.switchToVideoInput(e):this.rotateVideoInput(!1!==e)})}static getMediaConstraintsForDevice(e,t){const i=t||this.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const t=e.getConstraints().deviceId;return g.getValueFromConstrainDOMString(t)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const t=e.getConstraints().facingMode;return g.getValueFromConstrainDOMString(t)}}}static isUserFacing(e){const t=g.getFacingModeFromMediaStreamTrack(e);return!!t&&"user"===t.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,t={width:this.width,height:this.height};e.videoWidth&&(t.width=e.videoWidth,t.height=e.videoHeight);const i=this.canvas.nativeElement;i.width=t.width,i.height=t.height;const s=i.getContext("2d");s.drawImage(e,0,0);const a=this.imageType?this.imageType:g.DEFAULT_IMAGE_TYPE,r=i.toDataURL(a,this.imageQuality?this.imageQuality:g.DEFAULT_IMAGE_QUALITY);let n=null;this.captureImageData&&(n=s.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new o(r,a,n))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,t){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const s=g.getMediaConstraintsForDevice(e,t);navigator.mediaDevices.getUserMedia({video:s}).then(e=>{this.mediaStream=e,i.srcObject=e,i.play(),this.activeVideoSettings=e.getVideoTracks()[0].getSettings();const t=g.getDeviceIdFromMediaStreamTrack(e.getVideoTracks()[0]);this.cameraSwitched.next(t),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=t?this.availableVideoInputs.findIndex(e=>e.deviceId===t):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(e=>{this.initError.next({message:e.message,mediaStreamError:e})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return g.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(e=>e.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,t)=>{h.getAvailableVideoInputs().then(t=>{this.availableVideoInputs=t,e(t)}).catch(e=>{this.availableVideoInputs=[],t(e)})})}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Cb({type:e,selectors:[["webcam"]],viewQuery:function(e,t){var i;1&e&&(a.dc(r,!0),a.dc(n,!0)),2&e&&(a.Zb(i=a.Tb())&&(t.video=i.first),a.Zb(i=a.Tb())&&(t.canvas=i.first))},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,t){1&e&&(a.Lb(0,"div",0),a.Sb("click",(function(){return t.imageClick.next()})),a.Lb(1,"video",1,2),a.Sb("resize",(function(){return t.videoResize()})),a.Kb(),a.ec(3,c,1,0,"div",3),a.Jb(4,"canvas",4,5),a.Kb()),2&e&&(a.xb(1),a.zb(t.videoStyleClasses),a.Xb("width",t.videoWidth)("height",t.videoHeight),a.xb(2),a.Xb("ngIf",t.allowCameraSwitch&&t.availableVideoInputs.length>1&&t.videoInitialized),a.xb(1),a.Xb("width",t.width)("height",t.height))},directives:[s.j],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"]}),e.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e})(),l=(()=>{let e=class{};return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[s.b]]}),e})();var u=i("XNiG"),m=i("HDdC"),b=i("quSY");class p extends b.a{constructor(e,t){super()}schedule(e,t=0){return this}}class v extends p{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,s=void 0;try{this.work(e)}catch(a){i=!0,s=!!a&&a||new Error(a)}if(i)return this.unsubscribe(),s}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let w=(()=>{class e{constructor(t,i=e.now){this.SchedulerAction=t,this.now=i}schedule(e,t=0,i){return new this.SchedulerAction(this,e).schedule(i,t)}}return e.now=()=>Date.now(),e})();class A extends w{constructor(e,t=w.now){super(e,()=>A.delegate&&A.delegate!==this?A.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return A.delegate&&A.delegate!==this?A.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const I=new A(v);var f=i("DH7j");function S(e){const{subscriber:t,counter:i,period:s}=e;t.next(i),this.schedule({subscriber:t,counter:i+1,period:s},s)}class D{}var C=i("jNHb");function y(e,t){if(1&e){const e=a.Mb();a.Lb(0,"webcam",7),a.Sb("imageCapture",(function(t){return a.ac(e),a.Ub().handleImage(t)}))("initError",(function(t){return a.ac(e),a.Ub().handleInitError(t)})),a.Kb()}if(2&e){const e=a.Ub();a.Xb("height",500)("width",500)("trigger",e.triggerObservable)("videoOptions",e.videoOptions)("imageQuality",1)}}function k(e,t){if(1&e&&(a.Lb(0,"div"),a.Jb(1,"img",4),a.Kb()),2&e){const e=t.$implicit;a.xb(1),a.Yb("src",e.fileFullPath,a.bc)}}function O(e,t){1&e&&(a.Lb(0,"h4"),a.fc(1,"Messages:"),a.Kb())}function V(e,t){if(1&e&&(a.Lb(0,"ul"),a.Lb(1,"li"),a.fc(2),a.Vb(3,"json"),a.Kb(),a.Kb()),2&e){const e=t.$implicit;a.xb(2),a.gc(a.Wb(3,1,e))}}let E=(()=>{class e{constructor(e){this._fileImageService=e,this.showWebcam=!0,this.multipleWebcamsAvailable=!1,this.videoOptions={width:{ideal:424},height:{ideal:476}},this.errors=[],this.webcamImage=null,this.trigger=new u.a}ngOnInit(){this.username=sessionStorage.getItem("user"),this.userid=sessionStorage.getItem("userid"),h.getAvailableVideoInputs().then(e=>{this.multipleWebcamsAvailable=e&&e.length>1}),function(e=0,t=I){var i;return i=e,(Object(f.a)(i)||!(i-parseFloat(i)+1>=0)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=I),new m.a(i=>(i.add(t.schedule(S,e,{subscriber:i,counter:0,period:e})),i))}(1e3).subscribe(()=>{})}triggerSnapshot(){this.trigger.next()}handleInitError(e){this.errors.push(e)}handleImage(e){this.webcamImage=e;const t=new FormData;t.append("base64",e.imageAsDataUrl),t.append("codigoAlummno",this.username);const i=new D;i.base64=e.imageAsDataUrl.replace(/^data:image\/(png|jpg|jpeg);base64,/,""),i.codigoAlummno=this.userid,console.log(i),this._fileImageService.Create(i).subscribe(e=>{console.log(e)})}get triggerObservable(){return this.trigger.asObservable()}clickServiceGet(){this._fileImageService.GetAlert().subscribe(e=>{this.imgUrl=e.data.fileFullPath,this.imgOriginals=e.data.fotoOrininals,console.log(this.imgOriginals)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(C.a))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-home"]],decls:14,vars:6,consts:[[1,"py-5",2,"text-align","center"],[1,"webcam"],[3,"height","width","trigger","videoOptions","imageQuality","imageCapture","initError",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-lg",3,"click"],[1,"img_capture",3,"src"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"height","width","trigger","videoOptions","imageQuality","imageCapture","initError"]],template:function(e,t){1&e&&(a.Lb(0,"h5"),a.fc(1),a.Kb(),a.Lb(2,"div",0),a.Lb(3,"div",1),a.ec(4,y,1,5,"webcam",2),a.Jb(5,"br"),a.Lb(6,"button",3),a.Sb("click",(function(){return t.triggerSnapshot()})),a.fc(7,"Capture"),a.Kb(),a.Jb(8,"br"),a.Jb(9,"br"),a.Kb(),a.Kb(),a.Jb(10,"img",4),a.ec(11,k,2,1,"div",5),a.ec(12,O,2,0,"h4",6),a.ec(13,V,4,3,"ul",5)),2&e&&(a.xb(1),a.gc(t.username),a.xb(3),a.Xb("ngIf",t.showWebcam),a.xb(6),a.Yb("src",t.imgUrl,a.bc),a.xb(1),a.Xb("ngForOf",t.imgOriginals),a.xb(1),a.Xb("ngIf",t.errors.length>0),a.xb(1),a.Xb("ngForOf",t.errors))},directives:[s.j,s.i,d],pipes:[s.e],styles:[".img_capture[_ngcontent-%COMP%]{width:150px;height:150}"]}),e})();var T=i("tyNb");const M=[{path:"",component:E}];let x=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[T.b.forChild(M)],T.b]}),e})();var F=i("3Pt+");let U=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[s.b,x,l,F.b]]}),e})()}}]);